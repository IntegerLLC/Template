import{api as t}from"./index.js";import{template as e,t as l}from"./template.js";let r=t.action;function n(t){return o(t,!0)}function o(t,r){return e((()=>function(t){let e=t.content||t,r=0;return[t].concat(Array.from(e.querySelectorAll("[data-t],[data-o],[data-bind]"))).forEach((t=>{a.forEach(((e,n)=>{let o=t.dataset[e];if(null==o)return;let a=n>0,c=n>1;o?o.split(" ").forEach((e=>{const[r,n]=e.split(":");n?l(n,a,c).call({el:t,name:r}):l(r,a,c).call({el:t})})):l(r,a,c).call({el:t}),r++}))})),t}(document.querySelector(t))),r)}t.action=(t,e,l)=>{let n=(t,e)=>(l,r,n)=>{let o=t||n&&l;return"_"!==o&&"this"!==o||(o=null),e(l,o)};return(o,a)=>{let c=e[o];if(!c||"object"!=typeof c||c.nodeType||c.length)n(a,r(t,e,l))(o);else{let e=n(a,r(t,c,l));Object.keys(c).forEach(e)}}};let a=["t","o","bind"];export{n as fill,o as template};
